# ============================================================================
# OutlookManager Unified Env Template
# One file for both Docker Compose and local startup.
# Usage:
#   cp .env.example .env
#   ./start.sh docker       # start docker stack
#   ./start.sh local        # run python main.py locally
# ============================================================================

# ----------------------------------------------------------------------------
# Common app settings
# ----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000
WORKERS=1
PYTHONDONTWRITEBYTECODE=1
PYTHONUNBUFFERED=1
LOG_LEVEL=INFO
DEBUG=false

# IMPORTANT: change in production
ADMIN_PASSWORD=change_me_admin_password

# ----------------------------------------------------------------------------
# PostgreSQL (container)
# ----------------------------------------------------------------------------
POSTGRES_DB=outlook_manager
POSTGRES_USER=outlook
POSTGRES_PASSWORD=outlook
POSTGRES_PORT=5432

# ----------------------------------------------------------------------------
# Redis (container)
# ----------------------------------------------------------------------------
REDIS_PORT=6379
REDIS_KEY_PREFIX=outlook-manager
REDIS_SOCKET_TIMEOUT_SECONDS=3

# ----------------------------------------------------------------------------
# Dual URLs: local runtime vs docker runtime
# start.sh local  -> uses *_LOCAL
# docker compose  -> uses *_DOCKER
# ----------------------------------------------------------------------------
DATABASE_URL_LOCAL=postgresql://outlook:outlook@localhost:5432/outlook_manager
DATABASE_URL_DOCKER=postgresql://outlook:outlook@postgres:5432/outlook_manager

REDIS_URL_LOCAL=redis://localhost:6379/0
REDIS_URL_DOCKER=redis://redis:6379/0

# ----------------------------------------------------------------------------
# Token behavior (optional)
# ----------------------------------------------------------------------------
DEFAULT_ACCOUNT_RT_TTL_SECONDS=7776000
DEFAULT_ACCESS_TOKEN_TTL_SECONDS=3600
TOKEN_REFRESH_DEFAULT_INTERVAL_VALUE=12
TOKEN_REFRESH_DEFAULT_INTERVAL_UNIT=hour
TOKEN_REFRESH_SCHEDULER_CHECK_SECONDS=30
ACCESS_TOKEN_BACKGROUND_REFRESH_SECONDS=300
ACCESS_TOKEN_FORCE_REFRESH_SECONDS=30
WEB_MAILBOX_SSE_POLL_SECONDS=5

# ----------------------------------------------------------------------------
# Temporary mailbox API (GPTMail) for /web/{temporary_email}
# ----------------------------------------------------------------------------
TEMP_MAIL_API_BASE_URL=https://mail.chatgpt.org.uk
TEMP_MAIL_API_KEY=gpt-test
TEMP_MAIL_API_TIMEOUT_SECONDS=12
